<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OVK Wool Market Report - PDF Generator</title>
    <style>
        /* Import Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* CSS Variables for consistent theming */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --text-primary: #1e293b;
            --text-muted: #64748b;
            --accent-primary: #3b82f6;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --border-primary: #e2e8f0;
        }
        
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        /* Layout containers */
        .min-h-screen {
            min-height: 100vh;
        }
        
        .w-95 {
            width: 95%;
        }
        
        .max-w-none {
            max-width: none;
        }
        
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        
        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        
        .space-y-4 > * + * {
            margin-top: 1rem;
        }
        
        /* Header styles */
        .header {
            background: white;
            border-bottom: 1px solid var(--border-primary);
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 50;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
        }
        
        .header-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--accent-primary);
        }
        
        .header-subtitle {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-muted);
        }
        
        /* Card styles */
        .card {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-primary);
        }
        
        /* Auction title section */
        .auction-title {
            background: linear-gradient(to right, #2563eb, #4f46e5);
            border-radius: 0.5rem;
            padding: 1.5rem;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .auction-title-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .auction-title h1 {
            font-size: 1.875rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .auction-date {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #dbeafe;
        }
        
        .auction-date svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        
        .auction-date span {
            font-size: 1.125rem;
            font-weight: 600;
        }
        
        .season-info {
            text-align: right;
        }
        
        .season-label {
            color: #dbeafe;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }
        
        .season-value {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        /* Grid layouts */
        .grid {
            display: grid;
        }
        
        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        
        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        
        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        
        .grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }
        
        .gap-3 {
            gap: 0.75rem;
        }
        
        .gap-4 {
            gap: 1rem;
        }
        
        /* Indicators grid */
        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .indicator-card {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-primary);
            text-align: center;
        }
        
        .indicator-icon {
            width: 2.5rem;
            height: 2.5rem;
            margin: 0 auto 1rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .indicator-icon.blue {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
        
        .indicator-icon.green {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .indicator-icon.purple {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }
        
        .indicator-icon.orange {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .indicator-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        
        .indicator-value {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .indicator-unit {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        
        .indicator-change {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .indicator-change.positive {
            color: #10b981;
        }
        
        .indicator-change.negative {
            color: #ef4444;
        }
        
        .indicator-change svg {
            width: 1rem;
            height: 1rem;
        }
        
        /* Table styles */
        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .table th {
            background: #f8fafc;
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-primary);
        }
        
        .table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-primary);
        }
        
        .table tr:last-child td {
            border-bottom: none;
        }
        
        /* Chart container */
        .chart-container {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-primary);
            min-height: 300px;
        }
        
        .chart-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        /* Responsive design */
        @media (min-width: 768px) {
            .md\\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            
            .md\\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
            
            .md\\:grid-cols-4 {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }
        
        @media (min-width: 1280px) {
            .xl\\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
            
            .xl\\:col-span-2 {
                grid-column: span 2 / span 2;
            }
        }
        
        /* Utility classes */
        .text-center {
            text-align: center;
        }
        
        .font-bold {
            font-weight: 700;
        }
        
        .font-semibold {
            font-weight: 600;
        }
        
        .text-sm {
            font-size: 0.875rem;
        }
        
        .text-lg {
            font-size: 1.125rem;
        }
        
        .text-xl {
            font-size: 1.25rem;
        }
        
        .text-2xl {
            font-size: 1.5rem;
        }
        
        .text-3xl {
            font-size: 1.875rem;
        }
        
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        
        .mb-4 {
            margin-bottom: 1rem;
        }
        
        .mt-4 {
            margin-top: 1rem;
        }
        
        .flex {
            display: flex;
        }
        
        .items-center {
            align-items: center;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .gap-2 {
            gap: 0.5rem;
        }
        
        .gap-4 {
            gap: 1rem;
        }
        
        /* Print styles for PDF generation */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .header {
                position: static;
                box-shadow: none;
                border-bottom: 2px solid #000;
            }
            
            .card, .indicator-card, .chart-container {
                box-shadow: none;
                border: 1px solid #ccc;
                break-inside: avoid;
            }
            
            .auction-title {
                break-inside: avoid;
            }
            
            .grid {
                break-inside: avoid;
            }
            
            .table {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="min-h-screen">
        <!-- Header -->
        <header class="header">
            <div class="w-95 max-w-none mx-auto px-2 py-4">
                <div class="header-content">
                    <img src="../public/assets/logos/ovk-logo-embedded.svg" alt="OVK Logo" class="logo">
                    <div>
                        <h1 class="header-title">OVK WOOL MARKET REPORT</h1>
                        <p class="header-subtitle" id="current-month"></p>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="w-95 max-w-none mx-auto px-2 py-4">
            <div class="space-y-4">
                <!-- Auction Title Section -->
                <div class="auction-title">
                    <div class="auction-title-content">
                        <div>
                            <h1 id="catalogue-name">CAT01</h1>
                            <div class="auction-date">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <span id="auction-date">January 8, 2025</span>
                            </div>
                        </div>
                        <div class="season-info">
                            <div class="season-label">Season</div>
                            <div class="season-value" id="season-label">2025/26</div>
                        </div>
                    </div>
                </div>

                <!-- Indicators Grid -->
                <div class="indicators-grid">
                    <div class="indicator-card">
                        <div class="indicator-icon blue">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                            </svg>
                        </div>
                        <div class="indicator-title">Total Lots</div>
                        <div class="indicator-value" id="total-lots">10,250</div>
                        <div class="indicator-unit">bales</div>
                        <div class="indicator-change positive">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 18L9 11.25l4.306 4.306a11.95 11.95 0 015.814-5.518l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.94" />
                            </svg>
                            <span id="total-lots-change">+5.2%</span>
                        </div>
                    </div>

                    <div class="indicator-card">
                        <div class="indicator-icon green">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
                            </svg>
                        </div>
                        <div class="indicator-title">Total Volume</div>
                        <div class="indicator-value" id="total-volume">1,550.8</div>
                        <div class="indicator-unit">MT</div>
                        <div class="indicator-change positive">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 18L9 11.25l4.306 4.306a11.95 11.95 0 015.814-5.518l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.94" />
                            </svg>
                            <span id="total-volume-change">+3.1%</span>
                        </div>
                    </div>

                    <div class="indicator-card">
                        <div class="indicator-icon purple">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="indicator-title">Average Price</div>
                        <div class="indicator-value" id="avg-price">181.45</div>
                        <div class="indicator-unit">ZAR/kg</div>
                        <div class="indicator-change negative">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 6L9 12.75l4.286-4.286a11.948 11.948 0 014.306 6.43l.776 2.898m0 0l3.182-5.511m-3.182 5.511l-5.511-3.182" />
                            </svg>
                            <span id="avg-price-change">-2.3%</span>
                        </div>
                    </div>

                    <div class="indicator-card">
                        <div class="indicator-icon orange">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="indicator-title">Total Value</div>
                        <div class="indicator-value" id="total-value">281.4</div>
                        <div class="indicator-unit">ZAR M</div>
                        <div class="indicator-change positive">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 18L9 11.25l4.306 4.306a11.95 11.95 0 015.814-5.518l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.94" />
                            </svg>
                            <span id="total-value-change">+0.7%</span>
                        </div>
                    </div>
                </div>

                <!-- Market Overview and Insights -->
                <div class="grid xl:grid-cols-3 gap-4">
                    <div class="card">
                        <h3 class="chart-title">Market Insights</h3>
                        <div id="market-insights">
                            <p>Market conditions remain stable with strong demand for fine micron wool. Certified wool continues to command premium prices with RWS certification showing positive trends.</p>
                        </div>
                    </div>
                    <div class="xl:col-span-2 card">
                        <h3 class="chart-title">Market Overview</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600" id="usd-rate">18.45</div>
                                <div class="text-sm text-gray-600">USD/ZAR</div>
                                <div class="text-sm text-green-600" id="usd-change">+0.2%</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-600" id="rws-premium">7.6%</div>
                                <div class="text-sm text-gray-600">RWS Premium</div>
                                <div class="text-sm text-green-600" id="rws-change">+1.2%</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600" id="awex-price">12.61</div>
                                <div class="text-sm text-gray-600">AWEX USD/kg</div>
                                <div class="text-sm text-green-600" id="awex-change">+0.6%</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Micron Price Chart -->
                <div class="chart-container">
                    <h3 class="chart-title">Micron Price Analysis</h3>
                    <div id="micron-chart">
                        <!-- Chart will be inserted here -->
                        <div class="text-center py-8">
                            <p class="text-gray-600">Micron price chart will be rendered here</p>
                        </div>
                    </div>
                </div>

                <!-- Top Sales Table -->
                <div class="card">
                    <h3 class="chart-title">Top Sales Performance</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Position</th>
                                <th>Farm</th>
                                <th>Region</th>
                                <th>Price (ZAR/kg)</th>
                                <th>Micron</th>
                                <th>Certified</th>
                                <th>Buyer</th>
                            </tr>
                        </thead>
                        <tbody id="top-sales-table">
                            <tr>
                                <td>1</td>
                                <td>Riverside Farm</td>
                                <td>Western Cape</td>
                                <td>245.50</td>
                                <td>17.5</td>
                                <td>RWS</td>
                                <td>BKB PINNACLE FIBRES</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Mountain View</td>
                                <td>Eastern Cape</td>
                                <td>238.20</td>
                                <td>18.0</td>
                                <td>RWS</td>
                                <td>MODIANO SA</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Valley Estate</td>
                                <td>Free State</td>
                                <td>232.80</td>
                                <td>18.5</td>
                                <td>Standard</td>
                                <td>STUCKEN & CO</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Buyer Analysis -->
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="card">
                        <h3 class="chart-title">Top Buyers</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Buyer</th>
                                    <th>Share %</th>
                                    <th>Bales</th>
                                </tr>
                            </thead>
                            <tbody id="buyers-table">
                                <tr>
                                    <td>BKB PINNACLE FIBRES</td>
                                    <td>24.89%</td>
                                    <td>1,556</td>
                                </tr>
                                <tr>
                                    <td>MODIANO SA</td>
                                    <td>22.55%</td>
                                    <td>1,410</td>
                                </tr>
                                <tr>
                                    <td>STUCKEN & CO</td>
                                    <td>18.72%</td>
                                    <td>1,170</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="card">
                        <h3 class="chart-title">Broker Performance</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Broker</th>
                                    <th>Offered</th>
                                    <th>Sold</th>
                                    <th>Clearance %</th>
                                </tr>
                            </thead>
                            <tbody id="brokers-table">
                                <tr>
                                    <td>BKB</td>
                                    <td>2,850</td>
                                    <td>2,720</td>
                                    <td>95.4%</td>
                                </tr>
                                <tr>
                                    <td>OVK</td>
                                    <td>2,100</td>
                                    <td>1,980</td>
                                    <td>94.3%</td>
                                </tr>
                                <tr>
                                    <td>JLW</td>
                                    <td>1,800</td>
                                    <td>1,720</td>
                                    <td>95.6%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="text-center py-3 text-sm border-t" style="color: var(--text-muted); border-color: var(--border-primary);">
            <p>&copy; <span id="current-year"></span> OVK Wool & Mohair Market Platform. All rights reserved.</p>
        </footer>
    </div>

    <script src="data.js"></script>
    <script>
        // Initialize the page with current data
        document.addEventListener('DOMContentLoaded', function() {
            // Set current month and year
            const now = new Date();
            document.getElementById('current-month').textContent = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            document.getElementById('current-year').textContent = now.getFullYear();
            
            // Try to load data from localStorage (from main app integration)
            const savedData = localStorage.getItem('pdfData');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    PDFGenerator.populateAuctionData(data);
                    localStorage.removeItem('pdfData'); // Clean up after use
                } catch (error) {
                    console.error('Error parsing saved data:', error);
                    PDFGenerator.populateAuctionData(PDFGenerator.SAMPLE_AUCTION_DATA);
                }
            } else {
                // Use sample data if no saved data
                PDFGenerator.populateAuctionData(PDFGenerator.SAMPLE_AUCTION_DATA);
            }
        });
    </script>
</body>
</html>
